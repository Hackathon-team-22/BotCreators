# Нормализованный список требований

Каждое требование снабжено пометкой источника:

* **[V]** — видео
* **[T]** — ТЗ
* **[A]** — критерии приёмки (acceptance)

---

# 1. Требования к входным данным (история чата)

### 1.1. Бот должен принимать файлы, содержащие экспорт истории Telegram-чата.

Источники: **[V][T]**

### 1.2. Бот должен поддерживать загрузку **одного или нескольких файлов** за одну сессию.

Источники: **[V][T]**

### 1.3. Бот должен принимать **любое количество файлов, разрешённое Telegram**, но ограничения должны быть **явно

сообщены пользователю**.

Источники: **[V][T]**

### 1.4. Формат входных файлов может быть HTML/JSON; бот обязан корректно обрабатывать оба формата.

Источники: **[V][T]**

### 1.5. Входные файлы могут быть большими; бот должен уметь обрабатывать их корректно.

Источники: **[V][T]**

---

# 2. Извлечение участников, упоминаний и каналов

## 2.1. Основная логика извлечения

### 2.1.1. Бот должен определять всех пользователей, которые **хотя бы раз писали в чат**.

Источники: **[V][T]**

### 2.1.2. Бот должен извлекать пользователей, которые **были упомянуты (@username)

** в сообщениях, независимо от того, являются они участниками или нет.

Источники: **[V][T]**

### 2.1.3. Бот **не сможет** определить участников, которые **никогда не писали и не упоминались

**, и это допустимое поведение.

Источники: **[V]**

### 2.1.4. Бот должен **удалять дубли** — каждый пользователь должен быть представлен не более чем одним экземпляром.

Источники: **[V][T]**

### 2.1.5. Бот должен **исключать удалённые аккаунты** из результатов.

Источники: **[V][T]**

---

## 2.2. Обработка каналов

### 2.2.1. Сообщения, отправленные **от имени канала**, должны быть идентифицированы как каналы, а не пользователи.

Источники: **[V][T]**

### 2.2.2. Каналы должны быть **исключены** из общего списка участников.

Источники: **[V][T]**

### 2.2.3. Каналы должны быть вынесены в **отдельную вкладку Excel**.

Источники: **[V][T]**

### 2.2.4. Форварды постов из каналов также не должны попадать в список участников.

Источники: **[V]**

### 2.2.5. В профиле участника может быть информация о наличии канала; если возможно — её нужно извлечь и указать.

Источники: **[V][T]**

---

## 2.3. Структура данных по каждому пользователю

Бот должен извлекать следующие атрибуты:

### 2.3.1. Username

Источники: **[V][T]**

### 2.3.2. Name (имя и фамилия)

Источники: **[V][T]**

### 2.3.3. Bio / описание профиля

Источники: **[V][T]**

### 2.3.4. Дата регистрации пользователя (если возможно определить)

Источники: **[V][T]**

---

# 3. Формирование результата

## 3.1. Логика выбора формата

### 3.1.1. Если участников < 50 — бот присылает список username прямо в чат.

Источники: **[V][T]**

### 3.1.2. Если участников ≥ 51 — бот формирует Excel-файл; текстовый список в чат не отправляется.

Источники: **[V][T]**

### 3.1.3. Разрешено упростить и всегда отдавать Excel бессписочно (опционально).

Источники: **[V]**

---

## 3.2. Требования к Excel-файлу

Excel должен содержать столбцы:

### 3.2.1. Дата экспорта

Источники: **[V][T]**

### 3.2.2. Username

Источники: **[V][T]**

### 3.2.3. Имя и фамилия

Источники: **[V][T]**

### 3.2.4. Bio

Источники: **[V][T]**

### 3.2.5. Дата регистрации (если доступно)

Источники: **[V][T]**

### 3.2.6. Признак наличия канала в профиле

Источники: **[T]**

---

## 3.3. Excel должен содержать несколько вкладок (листов)

### 3.3.1. Основные участники

Источники: **[T]**

### 3.3.2. Упомянутые пользователи, не состоявшие в чате

Источники: **[V][T]**

### 3.3.3. Каналы

Источники: **[V][T]**

---

# 4. UX / UI и взаимодействие с ботом

### 4.1. Бот должен иметь понятный UX и не вызывать вопросов при использовании.

Источники: **[A]**

### 4.2. Инструкции и подсказки должны быть чёткими и краткими.

Источники: **[A]**

### 4.3. Бот должен информировать пользователя о лимитах Telegram (например, «Можно отправить до X файлов»).

Источники: **[V][T][A]**

### 4.4. Структура сообщений в чате должна быть ясной, без перегрузки.

Источники: **[A]**

### 4.5. UI/UX является отдельным оцениваемым параметром — качество UX влияет на итоговый результат.

Источники: **[A]**

---

# 5. Конфиденциальность и хранение данных

### 5.1. Бот не должен сохранять пользовательские данные на диск/сервер.

Источники: **[V][T]**

### 5.2. Обработка должна выполняться «на лету» — в оперативной памяти.

Источники: **[V][T]**

### 5.3. Все временные файлы должны удаляться после обработки.

Источники: **[V][T]**

### 5.4. Цель — исключить риски обработки персональных данных.

Источники: **[V][T]**

---

# 6. Надёжность, производительность, устойчивость

### 6.1. Бот не должен зависать или выполнять обработку чрезмерно долго.

Источники: **[V][T][A]**

### 6.2. Бот должен корректно обрабатывать большие файлы и большие истории чата.

Источники: **[V][T]**

### 6.3. Бот должен быть технически устойчивым и стабильно работать под нагрузкой.

Источники: **[A]**

### 6.4. Бот не должен «течь по памяти».

Источники: **[V]**

---

# 7. Архитектура и качество реализации

### 7.1. Архитектура должна быть продуманной и структурированной.

Источники: **[A]**

### 7.2. Код должен быть логичным, организованным по модулям, без хаотичности.

Источники: **[A]**

### 7.3. Должна существовать документация по архитектуре.

Источники: **[A][T]**

### 7.4. Проект должен быть пригоден для реального использования (production-ready).

Источники: **[A]**

---

# 8. Развёртывание и инфраструктура

### 8.1. Проект должен быть в GitHub-репозитории.

Источники: **[V][T]**

### 8.2. Проект должен полностью подниматься в Docker (Dockerfile / docker-compose).

Источники: **[V][T]**

### 8.3. Развёртывание должно быть простым, быстрым и однозначным.

Источники: **[A]**

### 8.4. Язык разработки — любой.

Источники: **[V][T]**

---

# 9. Документация и артефакты

### 9.1. Инструкция по использованию бота обязательна.

Источники: **[T][A]**

### 9.2. Должны быть указаны все ограничения:

* размер файлов
* количество файлов
* формат истории

Источники: **[T][A]**

### 9.3. Должен быть предоставлен пример Excel-выгрузки.

Источники: **[T]**

Сделаю нормальную трассируемость, но без избыточной детализации (группы требований вместо 78 строк, KISS).

Сначала задам справочники (UC и компоненты), потом сама матрица.

